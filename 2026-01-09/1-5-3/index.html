<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1-5-3 homework</title>
  </head>
  <body>
    <script>
      "use strict";

      document.writeln("<h1>ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”</h1>");

      // ì´ ì½”ë“œë¥¼ async function deliverPizza()ë¥¼ ë§Œë“¤ê¸°
      // ê° ë‹¨ê³„ë¥¼ awaitë¡œ ìˆœì°¨ ì‹¤í–‰
      // try-catchë¡œ ì—ëŸ¬ ì²˜ë¦¬ í†µí•©
      // ì„±ê³µì‹œ "ë°”ë‹¬ ì™„ë£Œ!" ì½˜ì†” ì¶œë ¥

      // orderPizza("Pepperoni", (err, orderId) => {
      //   if (err) return handleError(err);

      //   makeDough(orderId, (err, dough) => {
      //     if (err) return handleError(err);

      //     bakePizza(dough, (err, pizza) => {
      //       if (err) return handleError(err);
      //       console.log(`${pizza.name} ë°°ë‹¬ ì™„ë£Œ! ğŸ•`);
      //     });
      //   });
      // });

      // 1ì´ˆ ë’¤ ì„±ê³µí•˜ëŠ” ê°€ì§œ í•¨ìˆ˜
      const orderPizza = (name) =>
        new Promise((resolve) => {
          setTimeout(() => resolve(name), 1000);
        });

      const makeDough = (orderId) =>
        new Promise((resolve) => {
          setTimeout(() => resolve({ dough: true }), 1000);
        });

      const bakePizza = (dough) =>
        new Promise((resolve) => {
          setTimeout(() => resolve({ name: "Pepperoni" }), 1000);
        });

      async function deliverPizza() {
        try {
          const order = await orderPizza("Pepperoni");
          // console.log(`order: ${order}`);
          const dough = await makeDough(order);
          // console.log({ dough });
          const bake = await bakePizza(dough);
          // console.log({ bake });

          console.log(`${bake.name} ë°°ë‹¬ ì™„ë£Œ`);
        } catch (err) {
          console.error("ë°°ë‹¬ ì‹¤íŒ¨!", err);
        }
      }

      deliverPizza();
    </script>
  </body>
</html>
